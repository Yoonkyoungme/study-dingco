# 10장 . 일급 함수

본문 요약:

- 일급 값은 변수에 저장, 인자로 전달, 리턴값으로 사용 가능!! 즉, 코드로 다룰 수 있는 값! 일급이 아니라면 함수로 감싸 일급으로 만들 수 있음! 일급 함수는 일급 값처럼 사용할 수 있는 함수!
- 고차함수는 다른 함수에 인자로 넘기거나 리턴값으로 받을 수 있는 함수
- 함 수 이 름 에 있 는 암 묵 적 인 자 ⇒ 암묵적 인자 드러내기 로 (이름 → 일급값인 인자로 바꾸기) 해결가능
- 본문 콜백으로 바꾸기(동작 추상화) : 서로 다른 동작의 차이를 일급 함수 인자로 만들 수 있음.

리팩터링: 암묵적 인자 드러내기

함수 이름의 암묵적 인자 확인 → 명시적인 인자 추가 → 함수 본문의 하드 코딩된 값 새로운 인자로 바꿈 → 함수 호출하는 곳 고치기.

### 함수 본문을 콜백으로 바꾸기

콜백(callback): 인자로전달하는함수

함수 이름에 있는 암묵적인자 : 함수 이름이 인자처럼 작동

ex) set**shipping**ByName ,set**Tax**ByName … 처럼 내부 함수 구현은 거의 같은데 함수 이름이 차이를 만듬

→ 이러한 코드의 냄새는 암묵적 인자를 드러내기 리팩토링으로 해결할 수 있다. setFieldByName

일급값은 언어 전체에 어디서나 쓸 수 있다.

- 자바스크립트에서 일급이 아닌 것 :
  1. 수식연산자
  2. 반복문
  3. 조건문
  4. try/catch 블록
- 일급으로 할 수있는것

  1. 변수에 할당
  2. 함수의 인자로 넘기기

  3. 함수의 리턴값으로 받기
  4. 배열이나 객체에 담기

자스는 런타임검사를 통함..(함수 실행할때마다 검사!! 컴파일때 검사하지 않암)

### 데이터를 인터페이스 없이 그대로 사용

인터페이스를 사용하면 정해진대로 데이터를 사용할 수 있다는 장점이 있음. 그러나 추상화 벽 이 있는 구조로 만들게 된다면, 호출그래프의 아래 부분에는 일반적인데이터 구조인 객체와 배열을 사용한 데이터가 올 수밖에 업1ㅅ음!! → 미래에 어떻게 될 지 모르니까 알맞은 방법으로 `해석`할 수 있어야 함!!! ⇒ `데이터 지향` : 이벤트와 엔티티에 대한 사실을 표현하기 위해 **일반 데이터 구조**를 사용하는 프로그래밍 형식

### 정적 타입 vs 동적 타입

정적 타입: 컴파일(코드→기계어로 변환. 사용 가능한 프로그램이 될 때)할 때 타입 검사

동적 타입: 런타임(코드가 컴파일 된 후 , 사용자에 의해 실행할 때) 때 타입 확인!

자스는 동적 타입 언어임(타스는 이러한 자스에 정적 타입 언어를 추가한 것!!)

### 문자열 통신

웹브라우저와 서버는 JSON 으로 통신함→ 문자열임!!!

디비에 저장하거나 , 통신하려면 문자열로 통신해서 악의적으로 문자열을 넣을 수 있는 가능성이 있음.!!

→ 정적 타입 언어를 사용해도 마찬가지로 데이터를 런타임에 체크해야함!!!

어떤 문법이든 일급으로 만들 수 있음.

> 일급객체란 **다른 객체들에 일반적으로 적용가능한 연산을 모두 지원하는 객체.**

> 즉 일급 함수란 함수를 값과 동일하게 사용가능하다는 것!!

> 고차함수란 인자로 함수를 받거나 리턴값으로 함수를 리턴할 수 있는 함수

이렇게 고차함수를 이용해서 , 인자로 함수를 넘겨 기능은 다르지만 같은 부분은 같은 함수로 묶을 수 잇따.

### 함수 본문을 콜백으로 바꾸기 실전

이거 완전 빙봉이랑 했던 try~ catch util 화 하기랑 똑같음..

인라인함수(inline function)는 쓰는 곳에서 바로 정의하는 함수.

→ 함수로 전달하는 이유는 함수안에 있는 코드가 `특정한 문맥` 안에서 실행돼야 하기 때문

고차함수를 쓰면 다른곳에 정의된 문맥에서 코드를 실행 할 수 있음. 그리고 문맥은 함수이기 때문에 재사용 할 수 있다.

---

## 질문

Q. 자바스크립트는 필드명이나 함수명을 검사하지않습니다. 필드에 접근할 때 함수를 사용하는것이 문자열보다 안전하다는 조지의 생각은 맞을까요?

→ 필드명에 접근할 때 함수를 사용하게 된다면? 더 안전할수밖에 없다고 생각. 유효성 검사 및 캡슐화 가능. 그리고 만약에 API 에 변경사항이 있더라도, 필드명 그대로 사용하고, 내부에서 바꿔주면 되어서 이 부분도 신경쓰지 않아도 됨.(var translations = { 'quantity':
'number';) 이런식으로 . 필드명이 일급이라 가능!!(객체나 배열에 넣을 수 있다는 뜻!)

Q. 함수 이름에 있던 필드명은 이제 문자열로 공개하고 있습니다. 필드명이 바뀌어도 함수명 은 바꾸지 않아도됩니다. 문자열로 필드명을 공개하는 것과 함수 이름에 넣는 것이 어떻게 다를까요? 또 같은점은 무엇일까요?

→ 문자열로 필드명을 공개하는 것과 이름에 넣는것의 차이점

이름에 넣게 되면 재사용 불가, 그리고 만약 api 에 변화가 있다면 인자 뿐 아니라 이름도 변경해야함.

문자열로 필드명을 공개하게 된다면, 재사용이 수월해짐, api 변화가 있다면, 필드명을 바꾸거나, 필드명을 바꾸기 위해 내부에서 translate 코드를 짜야함. 그래도 , 각 필드마다 메서드들을 각각 적용해줄 수 있어 메서드 수를 줄일 수 있음. 그런데 , 각 메서드마다의 유효성 검사를 만들어줘야되어서 약간 번거로움이 있을 수 있음.
