## 4장 내용

### 무료 배송비 계산하기

절차적인 방법이 더 이해하기 쉬울 수 있음, 그러나

→ 테스트 하기 어려움.

→ 돔 업데이트와 비즈니스 규칙은 분리되어야 함!

→ 전역변수도 없어야 함!

→ 돔을 사용할 수 있는 곳에서 실행된다고 가정하면 안됨.

액션의 예 ) 돔 건들기, 전역변수 변경하기 ..

→ 입출력으로 바꾸기(함수는 입출력이 있다!)

입력의 예) 인자, 전역변수 읽기

입력이란 함수가 계산을 하기 위한 외부 정보

출력의 예) 콘솔찍기, 전역변수 바꾸기, 돔 업데이트,리턴값

출력이란 함수 밖으로 나오는 정보, 동작

**리턴과 인자 말고는 암묵적 입출력임**. 이러한 암묵적 입출력(부수효과)이 있면 액션이 됨.

그렇기 때문에 액션을 줄이려면 암묵적 입출력을 인자와 리턴으로 바꿔줘야 함.

### 액션에서 계산 빼내기

서브루틴 추출하기

함수 추출하기

카피 온 라이트

코드를 고치면서 동작은 그대로 유지하기!! → 리팩터링…

## 질문

### Q. 이렇게 코드의 질은 높이고 동작은 유지하면 좋은점은?

> 리팩터링(refactoring)은 소프트웨어 공학에서 '**결과의 변경 없이 코드의 구조를 재조정함**'을 뜻한다. 주로 가독성을 높이고 유지보수를 편하게 한다. 버그를 없애거나 새로운 기능을 추가하는 행위는 아니다.

리팩터링이 그냥 코드를 더 좋게 만드는건 줄 알았는데 동작을 유지해야 하는 구나 ! 라는것을 알게 되었다. 동작을 유지한다 가 TDD 와 비슷하다는 생각이 들었다. TDD 도 테스트를 짜고 테스트를 통과하도록 코드를 구현하는거니까 특정 동작을 하도록 보장하는 면에서 유사한 것 같다. 사실 전에 프로젝트 리팩토링을 할 떄는 특정 라이브러리를 사용하는 방식으로 고치는 등 아예 코드 전체를 수정해야하는 경우가 있었고, 그렇다보니 동작,UI도 같이 약간씩 수정하는 경우도 있었는데 이 경우 리팩토링과 버그 수정, 기능 수정(refactor, fix, bug) 를 분리하여 작업해야겠다 라고 생각이 들었다.

### Q. 재사용성을 높이고 쉽게 테스트 할 수 있는 것이 함수형 프로그래밍의 전부인가요?

> 동시성, 설계, 데이터 모델링에서도 좋다고 함.

이 부분은 내가 우테코에서 함수를 쪼개고, 테스트 하기 좋은 코드를 짜는 연습을 하면서도 이렇게 하는게 재사용성, 그리고 테스트를 위한 코드 인건가? 라는 생각과 재사용성을 높이는 것은 좋지만 읽기 쉬운 코드를 작성하는것도 중요한거 아닌가? 라는 고민을 계속 했었는데 책을 읽으면서 점점 함수형 프로그래밍을 왜 사용하는지 납득이 되어가는 것 같다.
